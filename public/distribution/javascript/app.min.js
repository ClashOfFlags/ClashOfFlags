!function e(t,r,n){function i(o,s){if(!r[o]){if(!t[o]){var u="function"==typeof require&&require;if(!s&&u)return u(o,!0);if(a)return a(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var l=r[o]={exports:{}};t[o][0].call(l.exports,function(e){var r=t[o][1][e];return i(r?r:e)},l,l.exports,e,t,r,n)}return r[o].exports}for(var a="function"==typeof require&&require,o=0;o<n.length;o++)i(n[o]);return i}({1:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(){function e(t){n(this,e),this.game=t,this.inputs={}}return i(e,[{key:"cursorKeys",value:function(){return this.inputs.cursorKeys||(this.inputs.cursorKeys=this.game.input.keyboard.createCursorKeys()),this.inputs.cursorKeys}}]),e}();r["default"]=a},{}],2:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(){function e(t){n(this,e),this.objects={}}return i(e,[{key:"set",value:function(e,t){this.objects[e]=t}},{key:"byType",value:function(e,t){var r=[];return this.map().objects[t].forEach(function(t){t.properties.type===e&&r.push(t)}),r}},{key:"map",value:function(){return this.objects.map}}]),e}();r["default"]=a},{}],3:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(){function e(){n(this,e)}return i(e,[{key:"image",value:function(e){return"assets/images/"+e}}]),e}();r["default"]=a},{}],4:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e("./State"),c=n(u),l=e("./../objects/sprites/Hero"),f=n(l),p=e("./../objects/sprites/TestCup"),y=(n(p),e("./../objects/sprites/Item")),h=(n(y),function(e){function t(e,r){i(this,t);var n=a(this,Object.getPrototypeOf(t).call(this));return n.player={},n.inputs=r.InputService,n.paths=r.PathService,n.objects=r.ObjectsService,n}return o(t,e),s(t,[{key:"preload",value:function(){this.game.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.load.tilemap("map","assets/tilemaps/map.json",null,Phaser.Tilemap.TILED_JSON),this.load.image("gameTiles","assets/images/dungeon_tileset_32.png"),this.game.load.image("player",this.paths.image("player.png")),this.game.load.image("cup",this.paths.image("bluecup.png"))}},{key:"create",value:function(){this.createMap(),this.createPlayer(),this.createControls()}},{key:"update",value:function(){this.game.physics.arcade.collide(this.player,this.blockedLayer),this.game.physics.arcade.collide(this.objects.cups,this.blockedLayer,this.destroy,null,this),this.game.physics.arcade.overlap(this.player,this.items,this.collect,null,this),this.game.physics.arcade.overlap(this.objects.cups,this.items,this.destroy,null,this),this.game.physics.arcade.overlap(this.player,this.waterAreas,this.handleWater,null,this),this.player.body.velocity.x=0,this.game.input.enabled=!0,this.cursors.up.isDown||this.wasd.up.isDown?0==this.player.body.velocity.y&&(this.player.body.velocity.y-=this.player.getSpeed()):this.cursors.down.isDown||this.wasd.down.isDown?0==this.player.body.velocity.y&&(this.player.body.velocity.y+=this.player.getSpeed()):this.player.body.velocity.y=0,this.cursors.left.isDown||this.wasd.left.isDown?this.player.body.velocity.x-=this.player.getSpeed():(this.cursors.right.isDown||this.wasd.right.isDown)&&(this.player.body.velocity.x+=this.player.getSpeed())}},{key:"collect",value:function(e,t){t.kill()}},{key:"handleWater",value:function(e,t){e.reset(100,100)}},{key:"destroy",value:function(e,t){e.kill()}},{key:"createMap",value:function(){this.map=this.game.add.tilemap("map"),this.map.addTilesetImage("dungeon_tileset_32","gameTiles"),this.backgroundlayer=this.map.createLayer("backgroundLayer"),this.blockedLayer=this.map.createLayer("blockedLayer"),this.map.setCollisionBetween(1,2e3,!0,"blockedLayer"),this.objects.set("map",this.map),this.createItems(),this.createWaterAreas()}},{key:"createPlayer",value:function(){var e=this,t=this.objects.byType("playerStart","objectsLayer");this.player=new f["default"](this.game,t[0].x,t[0].y,"player"),this.player.scale.x=2,this.player.scale.y=2,this.objects.cups=this.game.add.group();var r=this.objects.cups;r.enableBody=!0,r.physicsBodyType=Phaser.Physics.ARCADE,r.createMultiple(50,"cup"),r.setAll("checkWorldBounds",!0),r.setAll("outOfBoundsKill",!0),this.game.input.onDown.add(function(){var t=r.getFirstDead();t.reset(e.player.body.x,e.player.body.y),e.game.physics.arcade.moveToPointer(t,300)})}},{key:"createItems",value:function(){this.items=this.game.add.group(),this.items.enableBody=!0;var e=this.objects.byType("item","objectsLayer");e.forEach(function(e){this.createFromTiledObject(e,this.items)},this)}},{key:"createWaterAreas",value:function(){this.waterAreas=this.game.add.group(),this.waterAreas.enableBody=!0;var e=this.objects.byType("water","objectsLayer");e.forEach(function(e){this.createFromTiledObject(e,this.waterAreas)},this)}},{key:"createFromTiledObject",value:function(e,t){var r=t.create(e.x,e.y,e.properties.sprite);e.properties.sprite||r.body.setSize(e.width,e.height),Object.keys(e.properties).forEach(function(t){r[t]=e.properties[t]})}},{key:"createControls",value:function(){this.cursors=this.inputs.cursorKeys(),this.wasd={up:this.game.input.keyboard.addKey(Phaser.Keyboard.W),down:this.game.input.keyboard.addKey(Phaser.Keyboard.S),left:this.game.input.keyboard.addKey(Phaser.Keyboard.A),right:this.game.input.keyboard.addKey(Phaser.Keyboard.D)},this.game.input.keyboard.removeKeyCapture(Phaser.Keyboard.One)}}]),t}(c["default"]));r["default"]=h},{"./../objects/sprites/Hero":7,"./../objects/sprites/Item":8,"./../objects/sprites/TestCup":10,"./State":5}],5:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(){function e(t,r){n(this,e),this.game=t,this.$container=r}return i(e,[{key:"preload",value:function(){}},{key:"create",value:function(){}},{key:"update",value:function(){}}]),e}();r["default"]=a},{}],6:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var i=e("./States/GameState"),a=n(i),o=e("./Services/InputService"),s=n(o),u=e("./Services/PathService"),c=n(u),l=e("./Services/ObjectsService"),f=n(l),p=p||{};p=new Phaser.Game(640,640,Phaser.AUTO,"");var y=new Bottle;y.service("$container",function(){return y.container}),y.service("game",function(){return p}),y.service("InputService",s["default"],"game"),y.service("PathService",c["default"]),y.service("ObjectsService",f["default"],"game"),y.service("GameState",a["default"],"game","$container"),p.state.add("Game",y.container.GameState),p.state.start("Game")},{"./Services/InputService":1,"./Services/ObjectsService":2,"./Services/PathService":3,"./States/GameState":4}],7:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e("./Sprite"),c=n(u),l=function(e){function t(){return i(this,t),a(this,Object.getPrototypeOf(t).apply(this,arguments))}return o(t,e),s(t,[{key:"boot",value:function(){this.enableArcadePhysics(),this.body.collideWorldBounds=!0}},{key:"getSpeed",value:function(){return 200}}]),t}(c["default"]);r["default"]=l},{"./Sprite":9}],8:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s=e("./Sprite"),u=n(s),c=function(e){function t(){return i(this,t),a(this,Object.getPrototypeOf(t).apply(this,arguments))}return o(t,e),t}(u["default"]);r["default"]=c},{"./Sprite":9}],9:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function(e){function t(e,r,a,o,s){n(this,t);var u=i(this,Object.getPrototypeOf(t).call(this,e,r,a,o,s));return u.game.stage.addChild(u),u.boot(),u}return a(t,e),o(t,[{key:"boot",value:function(){}},{key:"enableArcadePhysics",value:function(){return this.game.physics.arcade.enable(this)}},{key:"options",value:function(){return{}}}]),t}(Phaser.Sprite);r["default"]=s},{}],10:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a=e("./Sprite"),o=(n(a),function s(){i(this,s)});r["default"]=o},{"./Sprite":9}]},{},[6]);