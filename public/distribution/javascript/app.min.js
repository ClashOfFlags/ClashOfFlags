!function e(t,a,i){function n(o,s){if(!a[o]){if(!t[o]){var l="function"==typeof require&&require;if(!s&&l)return l(o,!0);if(r)return r(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var c=a[o]={exports:{}};t[o][0].call(c.exports,function(e){var a=t[o][1][e];return n(a?a:e)},c,c.exports,e,t,a,i)}return a[o].exports}for(var r="function"==typeof require&&require,o=0;o<i.length;o++)n(i[o]);return n}({1:[function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),o=e("./../objects/values/Team"),s=i(o),l=e("./../setup/config"),u=i(l),c=function(){function e(t,a){n(this,e),this.game=t,this.$container=a,this.objects=this.$container.ObjectsService,this.playerFactory=this.$container.PlayerFactory,this.teamManager=a.TeamManager}return r(e,[{key:"run",value:function(){this.createTorchs(),this.createKeysRed(),this.createKeysBlue(),this.createTeams(),this.createItem("barrel"),this.createMiniMap()}},{key:"createItem",value:function(e){var t=this.game.add.group();t.enableBody=!0;var a=this.objects.byType(e,"objectsLayer");a.forEach(function(a){var i=t.create(a.x,a.y,e);i.anchor.setTo(.5,.5)},this),this.objects.set(e+"s",t)}},{key:"createMiniMap",value:function(){this.map=this.objects.get("map"),this.miniMapSize=2;for(var e=this.game.add.bitmapData(),t=0;t<this.map.layers.length;t++)for(var a=0;a<this.map.height;a++)for(var i=0;i<this.map.width;i++){var n=this.map.getTile(i,a,t);n&&"background"==this.map.layers[t].name?(e.ctx.fillStyle="#1D2A34",e.ctx.fillRect(i*this.miniMapSize,a*this.miniMapSize,this.miniMapSize,this.miniMapSize)):n&&"water"==this.map.layers[t].name?(e.ctx.fillStyle="#0000ff",e.ctx.fillRect(i*this.miniMapSize,a*this.miniMapSize,this.miniMapSize,this.miniMapSize)):n&&"obstacle"==this.map.layers[t].name&&(e.ctx.fillStyle="#cccccc",e.ctx.fillRect(i*this.miniMapSize,a*this.miniMapSize,this.miniMapSize,this.miniMapSize))}this.miniMap=this.game.add.sprite(10,390,e),this.miniMap.fixedToCamera=!0;var r=this.game.add.bitmapData();this.miniMapOverlay=this.game.add.sprite(10,390,r),this.miniMapOverlay.fixedToCamera=!0,this.objects.set("miniMapOverlay",r),this.objects.set("miniMapSize",this.miniMapSize)}},{key:"createTeams",value:function(){for(var e in u["default"].game.teams){var t=new s["default"](e);this.teamManager.add(t),this.createPlayersForTeam(t)}}},{key:"createPlayersForTeam",value:function(e){var t=this.objects.byProperties({type:"spawn",team:e.name},"objectsLayer");for(var a in u["default"].game.teams[e.name]){var i=u["default"].game.teams[e.name][a],n=_.find(t,function(e){return e.properties.player==i}),r=this.playerFactory.position(n).team(e).number(i).key("player").make();this.objects.set("player."+i,r)}}},{key:"createTorchs",value:function(){var e=this.game.add.group();e.enableBody=!0;var t=this.objects.byType("torch","objectsLayer");t.forEach(function(t){var a=e.create(t.x,t.y,"torch");a.animations.add("on",[0,1,2,3],10,!0),a.animations.play("on")},this)}},{key:"createKeysRed",value:function(){var e=this.game.add.group();e.enableBody=!0;var t=this.objects.byProperties({type:"key_red"},"objectsLayer");t.forEach(function(t){console.log("RedKey Create");e.create(t.x,t.y,"key")},this),this.objects.set("keyRedGroup",e)}},{key:"createKeysBlue",value:function(){var e=this.game.add.group();e.enableBody=!0;var t=this.objects.byProperties({type:"key_blue"},"objectsLayer");t.forEach(function(t){console.log("BlueKey Create");e.create(t.x,t.y,"key")},this),this.objects.set("keyBlueGroup",e)}},{key:"createControls",value:function(){this.cursors=this.inputs.cursorKeys(),this.wasd=this.inputs.wasd(),this.game.input.keyboard.removeKeyCapture(Phaser.Keyboard.One)}}]),e}();a["default"]=c},{"./../objects/values/Team":18,"./../setup/config":23}],2:[function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),o=e("./../objects/values/direction"),s=i(o),l=function(){function e(t){n(this,e),this.game=t,this.inputs={}}return r(e,[{key:"cursorKeys",value:function(){return this.inputs.cursorKeys||(this.inputs.cursorKeys=this.game.input.keyboard.createCursorKeys()),this.inputs.cursorKeys}},{key:"wasd",value:function(){return this.inputs.wasd||(this.inputs.wasd={up:this.game.input.keyboard.addKey(Phaser.Keyboard.W),down:this.game.input.keyboard.addKey(Phaser.Keyboard.S),left:this.game.input.keyboard.addKey(Phaser.Keyboard.A),right:this.game.input.keyboard.addKey(Phaser.Keyboard.D)}),this.inputs.wasd}},{key:"space",value:function(){return this.inputs.space||(this.inputs.space=this.game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR)),this.inputs.space}},{key:"applyToPlayer",value:function(e){e.body.velocity.x=0,e.body.velocity.y=0,this.cursorKeys().up.isDown||this.wasd().up.isDown?(e.moveToDirection(s["default"].TOP),e.body.velocity.y-=e.speed,e.animations.play("walk")):this.cursorKeys().down.isDown||this.wasd().down.isDown?(e.moveToDirection(s["default"].BOTTOM),e.body.velocity.y+=e.speed,e.animations.play("walk")):this.cursorKeys().left.isDown||this.wasd().left.isDown?(e.moveToDirection(s["default"].LEFT),e.body.velocity.x-=e.speed,e.animations.play("walk")):this.cursorKeys().right.isDown||this.wasd().right.isDown?(e.moveToDirection(s["default"].RIGHT),e.body.velocity.x+=e.speed,e.animations.play("walk")):(e.animations.stop(),e.frame=0)}}]),e}();a["default"]=l},{"./../objects/values/direction":20}],3:[function(e,t,a){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),r=function(){function e(t){i(this,e),this.$container=t,this.objects=t.ObjectsService,this.playerFactory=t.PlayerFactory,this.teamManager=t.TeamManager,this.socket=io(),this.player=null,this.players={},this.waitForHandshake=function(){}}return n(e,[{key:"init",value:function(){var e=this;this.socket.on("PlayerConnectEvent",function(t){e.onPlayerConnect(t)}),this.socket.on("PlayerDisconnectEvent",function(t){e.onPlayerDisconnect(t)}),this.socket.on("PlayerPositionEvent",function(t){e.onPlayerPosition(t)}),this.socket.on("PlayerShootEvent",function(t){e.onPlayerShoot(t)}),this.socket.on("PlayerHandshakeEvent",function(t){e.onPlayerHandshake(t)}),this.connect()}},{key:"connect",value:function(){this.socket.emit("PlayerConnectEvent")}},{key:"onPlayerHandshake",value:function(e){var t=this.teamManager.allPlayers()[e.slot];this.teamManager.hero=t,this.waitForHandshake(t)}},{key:"onPlayerConnect",value:function(e){this.players[e.id]=this.teamManager.allPlayers()[e.slot]}},{key:"onPlayerDisconnect",value:function(e){var t=this.players[e.id];t&&(t.kill(),t.name.kill())}},{key:"onPlayerPosition",value:function(e){var t=this.players[e.id];t.x=e.position.x,t.y=e.position.y,t.moveToDirection(e.position.direction),t.updateName()}},{key:"onPlayerShoot",value:function(e){var t=this.teamManager.allPlayers()[e.slot];t.shoot(e.direction)}},{key:"sendPosition",value:function(e){var t={direction:e.direction,x:e.x,y:e.y};this.socket.emit("PlayerPositionEvent",t)}},{key:"sendShoot",value:function(e){var t={direction:e.direction,x:e.x,y:e.y};this.socket.emit("PlayerShootEvent",t)}}]),e}();a["default"]=r},{}],4:[function(e,t,a){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),r=function(){function e(t){i(this,e),this.collection={}}return n(e,[{key:"set",value:function(e,t){return _.set(this.collection,e,t)}},{key:"byType",value:function(e,t){return this.byProperties({type:e},t)}},{key:"byProperties",value:function(e,t){var a=this,i=[];return this.map().objects[t].forEach(function(t){t.properties&&a.objectHasProperties(t,e)&&(t.y+=64,i.push(t))}),i}},{key:"objectHasProperties",value:function(e,t){for(var a in t)if(t.hasOwnProperty(a)){var i=e[a]&&t[a]==e[a],n=t[a]==e.properties[a];if(i||n)return!0}return!1}},{key:"get",value:function(e){return _.get(this.collection,e)}},{key:"map",value:function(){return this.get("map")}}]),e}();a["default"]=r},{}],5:[function(e,t,a){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),r=function(){function e(){i(this,e)}return n(e,[{key:"image",value:function(e){return"assets/images/"+e}}]),e}();a["default"]=r},{}],6:[function(e,t,a){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),r=function(){function e(t,a){i(this,e),this.game=t,this.$container=a,this.paths=a.PathService}return n(e,[{key:"run",value:function(e){this.game.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,e.load.tilemap("map","assets/tilemaps/map_philipp.json",null,Phaser.Tilemap.TILED_JSON),e.load.image("dungeon_tileset_64","assets/images/dungeon_tileset_64.png"),e.load.image("objects_tilset_64","assets/images/objects_tilset_64.png"),this.game.load.image("bullet",this.paths.image("flamer_projectile.png")),this.game.load.atlas("explosion","assets/images/fireball_hit.png","assets/images/fireball_hit.json"),this.game.load.atlas("fireball","assets/images/fireball.png","assets/images/fireball.json"),this.game.load.atlas("onfireanimation","assets/images/onfireanimation.png","assets/images/onfireanimation.json"),this.game.load.atlas("flame_a","assets/images/flame_a.png","assets/images/flame_a.json"),this.game.load.spritesheet("torch","assets/images/torch.png",64,64),this.game.load.spritesheet("water","assets/images/water.png",32,32),this.game.load.spritesheet("waterStone","assets/images/waterStone.png",32,32),this.game.load.spritesheet("player",this.paths.image("green_male_marine_flamer.png"),46,26),this.game.load.spritesheet("player_shoot",this.paths.image("green_male_marine_flamer_shoot.png"),52,26),this.game.load.spritesheet("key","assets/images/key.png",64,64),this.loadItems()}},{key:"loadItems",value:function(){this.game.load.image("barrel",this.paths.image("barrel.png"))}}]),e}();a["default"]=r},{}],7:[function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),l=e("./State"),u=i(l),c=e("./../objects/sprites/Hero"),f=(i(c),e("./../objects/sprites/Player")),h=(i(f),e("./../objects/sprites/TestCup")),p=(i(h),e("./../factories/PlayerFactory")),y=(i(p),function(e){function t(e,a){n(this,t);var i=r(this,Object.getPrototypeOf(t).call(this));return i.player=null,i.inputs=a.InputService,i.paths=a.PathService,i.objects=a.ObjectsService,i.preloader=a.Preloader,i.creator=a.Creator,i.playerFactory=a.PlayerFactory,i.network=a.NetworkService,window.clashOfFlags=i,i.teamManager=a.TeamManager,i}return o(t,e),s(t,[{key:"preload",value:function(){this.preloader.run(this)}},{key:"create",value:function(){var e=this;this.initPauseState(),this.createMap(),this.creator.run(),this.createControls(),this.network.init(),this.network.waitForHandshake=function(t){console.log("waited for handshake",t),e.player=t,e.game.camera.follow(e.player),e.objects.set("hero",t)},this.miniMapOverlay=this.objects.get("miniMapOverlay"),this.miniMapSize=this.objects.get("miniMapSize")}},{key:"update",value:function(){this.player&&(this.game.physics.arcade.collide(this.player,this.obstacleLayer),this.game.physics.arcade.collide(this.player,this.waterlayer),this.game.physics.arcade.collide(this.player,this.objects.get("barrels")),this.game.physics.arcade.overlap(this.player.weapon.bullets,this.objects.get("barrels"),this.bulletHitBarrel,null,this),this.game.physics.arcade.collide(this.objects.get("barrels"),this.obstacleLayer),this.game.physics.arcade.collide(this.player.weapon.bullets,this.obstacleLayer,this.bulletHitObstacle,null,this),this.players=this.teamManager.allPlayers(),this.game.physics.arcade.collide(this.player.weapon.bullets,this.players,this.bulletHitPlayer,null,this),this.game.physics.arcade.collide(this.player,this.players),this.keyRedGroup=this.objects.get("keyRedGroup"),this.game.physics.arcade.overlap(this.player,this.keyRedGroup,this.playerCollectsKey,null,this),this.keyBlueGroup=this.objects.get("keyBlueGroup"),this.game.physics.arcade.overlap(this.player,this.keyBlueGroup,this.playerCollectsKey,null,this),this.inputs.applyToPlayer(this.player),this.network.sendPosition(this.player),this.updateMiniMap())}},{key:"updateMiniMap",value:function(){this.miniMapOverlay.context.clearRect(0,0,this.miniMapOverlay.width,this.miniMapOverlay.height);for(var e=0;e<this.teamManager.teams[this.player.team.name].players.length;e++){var t=this.teamManager.teams[this.player.team.name].players[e],a="#0AFF12";t===this.player&&(a="#FFFF00"),this.miniMapOverlay.rect(Math.floor(t.x/64)*this.miniMapSize,Math.floor(t.y/64)*this.miniMapSize,2*this.miniMapSize,2*this.miniMapSize,a),this.miniMapOverlay.dirty=!0}}},{key:"bulletHitBarrel",value:function(e,t){this.bulletHitObstacle(e),this.createExplosionAnimation({x:t.x,y:t.y-t.height,key:"flame_a",frameName:"flame_a_000",frameNameMax:6,frameSpeed:60,repeat:!1,scale:.4}),t.kill()}},{key:"createExplosionAnimation",value:function(e){var t=this.game.add.sprite(e.x,e.y,e.key);t.anchor.setTo(.5,.5),t.scale.x=e.scale,t.scale.y=e.scale,t.animations.add("animation",Phaser.Animation.generateFrameNames(e.frameName,1,e.frameNameMax),e.frameSpeed,e.repeat),t.animations.play("animation"),t.events.onAnimationComplete.add(function(){t.kill()},this)}},{key:"bulletHitObstacle",value:function(e){this.createExplosionAnimation({x:e.x,y:e.y,key:"explosion",frameName:"fireball_hit_000",frameNameMax:9,frameSpeed:100,repeat:!1,scale:1}),e.kill()}},{key:"bulletHitPlayer",value:function(e,t){var a=this.explosions.getFirstDead();a=this.explosions.create(e.body.x,e.body.y,"explosion"),a.animations.add("fire",Phaser.Animation.generateFrameNames("fireball_hit_000",1,9),100,!1),a.animations.play("fire"),a.events.onAnimationComplete.add(function(){a.kill()},this),e.kill()}},{key:"playerCollectsKey",value:function(e,t){console.log("Key collected")}},{key:"createMap",value:function(){this.game.world.setBounds(0,0,6400,6400),this.objects.set("map",this.game.add.tilemap("map")),this.map=this.objects.get("map"),this.map.addTilesetImage("dungeon_tileset_64"),this.map.addTilesetImage("objects_tilset_64"),this.backgroundlayer=this.map.createLayer("background"),this.waterlayer=this.map.createLayer("water"),this.obstacleLayer=this.map.createLayer("obstacle"),this.decorationslayer=this.map.createLayer("decorations"),this.backgroundlayer.resizeWorld(),this.waterlayer.resizeWorld(),this.obstacleLayer.resizeWorld(),this.decorationslayer.resizeWorld(),this.map.setCollisionBetween(1,2e3,!0,"obstacle"),this.map.setCollisionBetween(1,2e3,!0,"water")}},{key:"createControls",value:function(){var e=this;this.cursors=this.inputs.cursorKeys(),this.wasd=this.inputs.wasd(),this.space=this.inputs.space(),this.game.input.keyboard.removeKeyCapture(Phaser.Keyboard.One),this.space.onDown.add(function(){e.player.shoot(),e.network.sendShoot(e.player)})}},{key:"pause",value:function(){this.game.input.enabled=!1,this.game.physics.arcade.isPaused=!0}},{key:"unpause",value:function(){this.game.input.enabled=!0,this.game.physics.arcade.isPaused=!1}},{key:"initPauseState",value:function(){var e=$("#game").is(":visible");return e?void this.unpause():void this.pause()}}]),t}(u["default"]));a["default"]=y},{"./../factories/PlayerFactory":11,"./../objects/sprites/Hero":14,"./../objects/sprites/Player":15,"./../objects/sprites/TestCup":17,"./State":8}],8:[function(e,t,a){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),r=function(){function e(t,a){i(this,e),this.game=t,this.$container=a}return n(e,[{key:"preload",value:function(){}},{key:"create",value:function(){}},{key:"update",value:function(){}}]),e}();a["default"]=r},{}],9:[function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),o=e("./Builder"),s=i(o),l=function(){function e(t){n(this,e),this.game=t,this.rebuild()}return r(e,[{key:"rebuild",value:function(){this.builder=new s["default"]}},{key:"set",value:function(e,t){return this.builder.set(e,t),this}},{key:"get",value:function(e,t){return this.builder.get(e,t)}},{key:"has",value:function(e){return this.builder.has(e)}},{key:"validate",value:function(){this.assertThatRequiredFieldsAreSet()}},{key:"assertThatRequiredFieldsAreSet",value:function(){if(!this.required)return!0;for(var e in this.required){var t=this.required[e];if(!this.has(t))throw new Error("Cannot build "+this.constructor.name+', "'+t+'" is missing.')}return!0}},{key:"make",value:function(){this.validate();var e=this.doMake();return this.rebuild(),e}}]),e}();a["default"]=l},{"./Builder":10}],10:[function(e,t,a){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),r=function(){function e(){i(this,e),this.attributes={}}return n(e,[{key:"get",value:function(e,t){return this.has(e)?this.attributes[e]:t}},{key:"set",value:function(e,t){this.attributes[e]=t}},{key:"has",value:function(e){return this.attributes.hasOwnProperty(e)}}]),e}();a["default"]=r},{}],11:[function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),l=e("./AbstractFactory"),u=i(l),c=e("./Builder"),f=(i(c),e("./../objects/sprites/Player")),h=i(f),p=function(e){function t(e){n(this,t);var a=r(this,Object.getPrototypeOf(t).call(this,e));return a.required=["key","position","team","number"],a}return o(t,e),s(t,[{key:"team",value:function(e){return this.set("team",e)}},{key:"position",value:function(e){return this.set("position",e)}},{key:"scale",value:function(e){return this.set("scale",e)}},{key:"key",value:function(e){return this.set("key",e)}},{key:"number",value:function(e){return this.set("number",e)}},{key:"doMake",value:function(){var e=new h["default"](this.game,this.get("position").x,this.get("position").y,this.get("key"));e.scale.x=this.get("scale",1.5),e.scale.y=this.get("scale",1.5),e.anchor.setTo(.5,.5),e.animations.add("walk",[0,1,2,3],12,!0),this.get("team").addPlayer(e),e.team=this.get("team"),e.number=this.get("number");var t={font:"16px Arial",fill:"red"==e.team.name?"#f00":"#00f",align:"center",width:e.width};return e.name=this.game.add.text(0,0,"Player "+this.get("number")+" "+ +this.get("networkId"),t),e.name.anchor.setTo(.5,.5),e.updateName(),e.health=100,e}}]),t}(u["default"]);a["default"]=p},{"./../objects/sprites/Player":15,"./AbstractFactory":9,"./Builder":10}],12:[function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var n=e("./setup/Bootstrapper"),r=i(n);r["default"].bootstrap()},{"./setup/Bootstrapper":22}],13:[function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),l=e("./Sprite"),u=i(l),c=e("../../setup/config"),f=i(c),h=function(e){function t(){return n(this,t),r(this,Object.getPrototypeOf(t).apply(this,arguments))}return o(t,e),s(t,[{key:"boot",value:function(){this.enableArcadePhysics(),this.checkWorldBounds=!0,this.outOfBoundsKill=!0,this.game.time.events.add(Phaser.Timer.SECOND*f["default"].game.weapons[this.key].lifetime,this.killBullet,this)}},{key:"killBullet",value:function(){this.kill()}}]),t}(u["default"]);a["default"]=h},{"../../setup/config":23,"./Sprite":16}],14:[function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var s=e("./Player"),l=i(s),u=function(e){function t(){return n(this,t),r(this,Object.getPrototypeOf(t).apply(this,arguments))}return o(t,e),t}(l["default"]);a["default"]=u},{"./Player":15}],15:[function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),l=e("./Sprite"),u=i(l),c=e("./../values/direction"),f=i(c),h=e("./../values/Weapon"),p=i(h),y=function(e){function t(){return n(this,t),r(this,Object.getPrototypeOf(t).apply(this,arguments))}return o(t,e),s(t,[{key:"boot",value:function(){this.speed=400,this.enableArcadePhysics(),this.body.collideWorldBounds=!0,this.direction=f["default"].RIGHT,this.weapon=new p["default"](this,this.game),this.number=1,this.networkId=null}},{key:"collect",value:function(e){e.kill()}},{key:"shoot",value:function(e){this.weapon.shoot(e)}},{key:"changeSpriteToNormal",value:function(){this.player.loadTexture("player",0,!0)}},{key:"updateName",value:function(){this.name.x=this.x,this.name.y=this.y-1.2*this.height}},{key:"moveToDirection",value:function(e){switch(this.direction=e,this.direction){case f["default"].TOP:this.angle=-90;break;case f["default"].BOTTOM:this.angle=90;break;case f["default"].LEFT:this.angle=180;break;case f["default"].RIGHT:this.angle=0}this.updateName()}}]),t}(u["default"]);a["default"]=y},{"./../values/Weapon":19,"./../values/direction":20,"./Sprite":16}],16:[function(e,t,a){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),s=function(e){function t(e,a,r,o,s){i(this,t);var l=n(this,Object.getPrototypeOf(t).call(this,e,a,r,o,s));return l.key=o,l.game.stage.addChild(l),l.game.add.existing(l),l.boot(),l}return r(t,e),o(t,[{key:"boot",value:function(){}},{key:"enableArcadePhysics",value:function(){return this.game.physics.arcade.enable(this)}},{key:"options",value:function(){return{}}}]),t}(Phaser.Sprite);a["default"]=s},{}],17:[function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var r=e("./Sprite"),o=(i(r),function s(){n(this,s)});a["default"]=o},{"./Sprite":16}],18:[function(e,t,a){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),r=function(){function e(t){i(this,e),this.name=t,this.players=[]}return n(e,[{key:"addPlayer",value:function(e){this.players.push(e)}}]),e}();a["default"]=r},{}],19:[function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),o=e("../sprites/Bullet"),s=i(o),l=e("./direction"),u=i(l),c=e("../../setup/config"),f=i(c),h=function(){function e(t,a){n(this,e),this.game=a,this.player=t,this.nextShotAt=Date.now()+f["default"].game.weapons.fireball.shotDelay,this.bullets=a.add.group(),this.bullets.enableBody=!0,this.bullets.physicsBodyType=Phaser.Physics.ARCADE,this.weapon="fireball"}return r(e,[{key:"shoot",value:function(){var e=arguments.length<=0||void 0===arguments[0]?null:arguments[0];if(!(this.nextShotAt>Date.now())){var t=e?e:this.player.direction;this.nextShotAt=Date.now()+f["default"].game.weapons.fireball.shotDelay,this.player.loadTexture("player_shoot",0,!0),this.game.time.events.add(.2*Phaser.Timer.SECOND,this.player.changeSpriteToNormal,this);var a=new s["default"](this.game,this.player.body.center.x,this.player.body.center.y,this.weapon);a.animations.add(this.weapon,Phaser.Animation.generateFrameNames(this.weapon+"_000",1,6),60,!0),a.animations.play(this.weapon),a.anchor.setTo(.5,.5),t===u["default"].BOTTOM?(a.body.velocity.y=f["default"].game.weapons[this.weapon].bulletSpeed,a.angle=180):t===u["default"].TOP?(a.angle=0,a.body.velocity.y=-f["default"].game.weapons[this.weapon].bulletSpeed):t===u["default"].RIGHT?(a.angle=90,a.body.velocity.x=f["default"].game.weapons[this.weapon].bulletSpeed):t===u["default"].LEFT&&(a.angle=-90,a.body.velocity.x=-f["default"].game.weapons[this.weapon].bulletSpeed),this.bullets.add(a)}}}]),e}();a["default"]=h},{"../../setup/config":23,"../sprites/Bullet":13,"./direction":20}],20:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a["default"]={TOP:"top",BOTTOM:"bottom",RIGHT:"right",LEFT:"left"}},{}],21:[function(e,t,a){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0
});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),r=function(){function e(t,a){i(this,e),this.game=t,this.$container=a,this.teams={},this.hero=null}return n(e,[{key:"add",value:function(e){this.teams[e.name]=e}},{key:"findPlayer",value:function(e){}},{key:"allPlayers",value:function(){var e={};for(var t in this.teams)for(var a in this.teams[t].players){var i=this.teams[t].players[a];e[i.number]=i}return e}},{key:"findFreePlayer",value:function(){var e=this.allPlayers();for(var t in e){var a=e[t];if(!a.networkId)return a}return null}}]),e}();a["default"]=r},{}],22:[function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),o=e("./../States/GameState"),s=i(o),l=e("./../Services/InputService"),u=i(l),c=e("./../Services/PathService"),f=i(c),h=e("./../Services/Preloader"),p=i(h),y=e("./../Services/Creator"),d=i(y),m=e("./../Services/ObjectsService"),b=i(m),v=e("./../Services/NetworkService"),g=i(v),w=e("./../factories/PlayerFactory"),k=i(w),P=e("./../services/TeamManager"),_=i(P),j=e("./config"),O=i(j),M=function(){function e(){n(this,e),this.bottle={},this.game={}}return r(e,[{key:"run",value:function(){this.bottle=new Bottle,this.game=new Phaser.Game(O["default"].game.size.width,O["default"].game.size.height,Phaser.AUTO,"game"),this.registerBindings(),this.game.state.add("Game",this.bottle.container.GameState),this.game.state.start("Game")}},{key:"registerBindings",value:function(){var e=this;this.bottle.service("$container",function(){return e.bottle.container}),this.bottle.service("game",function(){return e.game}),this.bottle.service("config",function(){return O["default"]}),this.bottle.service("InputService",u["default"],"game"),this.bottle.service("PathService",f["default"]),this.bottle.service("ObjectsService",b["default"],"game"),this.bottle.service("NetworkService",g["default"],"$container"),this.bottle.service("PlayerFactory",k["default"],"game","$container"),this.bottle.service("Preloader",p["default"],"game","$container"),this.bottle.service("TeamManager",_["default"],"game","$container"),this.bottle.service("Creator",d["default"],"game","$container"),this.bottle.service("GameState",s["default"],"game","$container")}}],[{key:"bootstrap",value:function(){return(new e).run()}}]),e}();a["default"]=M},{"./../Services/Creator":1,"./../Services/InputService":2,"./../Services/NetworkService":3,"./../Services/ObjectsService":4,"./../Services/PathService":5,"./../Services/Preloader":6,"./../States/GameState":7,"./../factories/PlayerFactory":11,"./../services/TeamManager":21,"./config":23}],23:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a["default"]={game:{size:{width:800,height:600},teams:{red:[1,2,3,4,5],blue:[6,7,8,9,10]},weapons:{fireball:{bulletSpeed:1e3,lifetime:1.5,shotDelay:300}}}}},{}]},{},[12]);