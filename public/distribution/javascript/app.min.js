!function e(t,n,i){function r(o,s){if(!n[o]){if(!t[o]){var u="function"==typeof require&&require;if(!s&&u)return u(o,!0);if(a)return a(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return r(n?n:e)},l,l.exports,e,t,n,i)}return n[o].exports}for(var a="function"==typeof require&&require,o=0;o<i.length;o++)r(i[o]);return r}({1:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(t){i(this,e),this.game=t,this.inputs={}}return r(e,[{key:"cursorKeys",value:function(){return this.inputs.cursorKeys||(this.inputs.cursorKeys=this.game.input.keyboard.createCursorKeys()),this.inputs.cursorKeys}},{key:"wasd",value:function(){return this.inputs.wasd||(this.inputs.wasd={up:this.game.input.keyboard.addKey(Phaser.Keyboard.W),down:this.game.input.keyboard.addKey(Phaser.Keyboard.S),left:this.game.input.keyboard.addKey(Phaser.Keyboard.A),right:this.game.input.keyboard.addKey(Phaser.Keyboard.D)}),this.inputs.wasd}},{key:"applyToPlayer",value:function(e){this.cursorKeys().up.isDown||this.wasd().up.isDown?0==e.body.velocity.y&&(e.body.velocity.y-=e.getSpeed()):this.cursorKeys().down.isDown||this.wasd().down.isDown?0==e.body.velocity.y&&(e.body.velocity.y+=e.getSpeed()):e.body.velocity.y=0,this.cursorKeys().left.isDown||this.wasd().left.isDown?e.body.velocity.x-=e.getSpeed():(this.cursorKeys().right.isDown||this.wasd().right.isDown)&&(e.body.velocity.x+=e.getSpeed())}}]),e}();n["default"]=a},{}],2:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(t){i(this,e),this.collection={}}return r(e,[{key:"set",value:function(e,t){this.collection[e]=t}},{key:"byType",value:function(e,t){var n=[];return this.map().objects[t].forEach(function(t){t.properties.type===e&&n.push(t)}),n}},{key:"get",value:function(e){return this.collection[e]}},{key:"map",value:function(){return this.get("map")}}]),e}();n["default"]=a},{}],3:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(){i(this,e)}return r(e,[{key:"image",value:function(e){return"assets/images/"+e}}]),e}();n["default"]=a},{}],4:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=e("./State"),c=i(u),l=e("./../objects/sprites/Hero"),p=i(l),f=e("./../objects/sprites/TestCup"),h=(i(f),function(e){function t(e,n){r(this,t);var i=a(this,Object.getPrototypeOf(t).call(this));return i.player={},i.inputs=n.InputService,i.paths=n.PathService,i.objects=n.ObjectsService,i}return o(t,e),s(t,[{key:"preload",value:function(){this.game.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.load.tilemap("map","assets/tilemaps/map_philipp.json",null,Phaser.Tilemap.TILED_JSON),this.load.image("dungeon_tileset_64","assets/images/dungeon_tileset_64.png"),this.load.image("objects_tilset_64","assets/images/objects_tilset_64.png"),this.game.load.image("player",this.paths.image("player.png")),this.game.load.image("cup",this.paths.image("bluecup.png")),this.game.load.image("bullet",this.paths.image("flamer_projectile.png")),this.game.load.atlasJSONHash("explosion","assets/images/onfireanimation.png","assets/images/onfireanimation.json"),this.game.load.spritesheet("fire","assets/images/fire.png",32,32),this.game.load.spritesheet("water","assets/images/water.png",32,32),this.game.load.spritesheet("waterStone","assets/images/waterStone.png",32,32)}},{key:"create",value:function(){this.createMap(),this.createPlayer(),this.createControls()}},{key:"update",value:function(){this.game.physics.arcade.collide(this.player,this.obstacleLayer),this.game.physics.arcade.collide(this.objects.cups,this.obstacleLayer,this.destroy,null,this),this.player.body.velocity.x=0,this.game.input.enabled=!0,this.inputs.applyToPlayer(this.player)}},{key:"destroy",value:function(e,t){var n=this.explosions.getFirstDead();n=this.explosions.create(e.x,e.y,"explosion"),n.animations.add("fire",Phaser.Animation.generateFrameNames("onfire_000",1,9),100,!1),n.scale.x=.7,n.scale.y=.7,n.x=n.x-n.width/2,n.y=n.y-n.height/2,n.animations.play("fire"),n.animations.play("fire"),n.events.onAnimationComplete.add(function(){n.kill()},this),e.kill()}},{key:"createMap",value:function(){this.game.world.setBounds(0,0,6400,6400),this.map=this.game.add.tilemap("map"),this.map.addTilesetImage("dungeon_tileset_64"),this.map.addTilesetImage("objects_tilset_64"),this.backgroundlayer=this.map.createLayer("background"),this.obstacleLayer=this.map.createLayer("obstacle"),this.decorationslayer=this.map.createLayer("decorations"),this.map.setCollisionBetween(1,2e3,!0,"obstacle"),this.explosions=this.game.add.group(),this.explosions.createMultiple(50,"explosion")}},{key:"createPlayer",value:function(){var e=this;this.player=new p["default"](this.game,100,100,"player"),this.player.scale.x=2,this.player.scale.y=2,this.game.camera.follow(this.player),this.objects.cups=this.game.add.group();var t=this.objects.cups;t.enableBody=!0,t.physicsBodyType=Phaser.Physics.ARCADE,t.createMultiple(50,"bullet"),t.setAll("checkWorldBounds",!0),t.setAll("outOfBoundsKill",!0),this.game.input.onDown.add(function(){var n=t.getFirstDead();n.reset(e.player.body.x-n.width/2,e.player.body.y-n.height/2),e.game.physics.arcade.moveToPointer(n,300);var i=e.game.math.angleBetween(n.x+n.width/2,n.y+n.height/2,e.game.input.activePointer.x,e.game.input.activePointer.y);n.rotation=i,n.pivot.x=.5*n.width,n.pivot.y=.5*n.height,n.x=n.x+n.width/2+e.player.width/2,n.y=n.y+n.height/2+e.player.height/2})}},{key:"createItems",value:function(){this.items=this.game.add.group(),this.items.enableBody=!0;var e=this.objects.byType("item","objectsLayer");e.forEach(function(e){this.createFromTiledObject(e,this.items)},this)}},{key:"findObjectsByType",value:function(e,t,n){var i=[];return t.objects[n].forEach(function(n){n.properties.type===e&&(n.y-=t.tileHeight,i.push(n))}),i}},{key:"createFromTiledObject",value:function(e,t){var n=t.create(e.x,e.y,e.properties.sprite);Object.keys(e.properties).forEach(function(t){n[t]=e.properties[t]})}},{key:"createControls",value:function(){this.cursors=this.inputs.cursorKeys(),this.wasd=this.inputs.wasd(),this.game.input.keyboard.removeKeyCapture(Phaser.Keyboard.One)}}]),t}(c["default"]));n["default"]=h},{"./../objects/sprites/Hero":7,"./../objects/sprites/TestCup":9,"./State":5}],5:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(t,n){i(this,e),this.game=t,this.$container=n}return r(e,[{key:"preload",value:function(){}},{key:"create",value:function(){}},{key:"update",value:function(){}}]),e}();n["default"]=a},{}],6:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var r=e("./States/GameState"),a=i(r),o=e("./Services/InputService"),s=i(o),u=e("./Services/PathService"),c=i(u),l=e("./Services/ObjectsService"),p=i(l),f=f||{};f=new Phaser.Game(640,640,Phaser.AUTO,"game");var h=new Bottle;h.service("$container",function(){return h.container}),h.service("game",function(){return f}),h.service("InputService",s["default"],"game"),h.service("PathService",c["default"]),h.service("ObjectsService",p["default"],"game"),h.service("GameState",a["default"],"game","$container"),f.state.add("Game",h.container.GameState),f.state.start("Game")},{"./Services/InputService":1,"./Services/ObjectsService":2,"./Services/PathService":3,"./States/GameState":4}],7:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=e("./Sprite"),c=i(u),l=function(e){function t(){return r(this,t),a(this,Object.getPrototypeOf(t).apply(this,arguments))}return o(t,e),s(t,[{key:"boot",value:function(){this.speed=500,this.enableArcadePhysics(),this.body.collideWorldBounds=!0}},{key:"getSpeed",value:function(){return this.speed}},{key:"setSpeed",value:function(e){this.speed=e}},{key:"collect",value:function(e){e.kill()}}]),t}(c["default"]);n["default"]=l},{"./Sprite":8}],8:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(e){function t(e,n,a,o,s){i(this,t);var u=r(this,Object.getPrototypeOf(t).call(this,e,n,a,o,s));return u.game.stage.addChild(u),u.game.add.existing(u),u.boot(),u}return a(t,e),o(t,[{key:"boot",value:function(){}},{key:"enableArcadePhysics",value:function(){return this.game.physics.arcade.enable(this)}},{key:"options",value:function(){return{}}}]),t}(Phaser.Sprite);n["default"]=s},{}],9:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=e("./Sprite"),o=(i(a),function s(){r(this,s)});n["default"]=o},{"./Sprite":8}]},{},[6]);